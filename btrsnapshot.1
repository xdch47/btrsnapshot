.\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.48.5.
.TH BTRSNAPSHOT "1" "August 2022" "btrsnapshot 0.1" "User Commands"
.SH NAME
btrsnapshot \- manual page for btrsnapshot 0.1
.SH SYNOPSIS
.B btrsnapshot
[\fI\,OPTION\/\fR] \fI\,SUBVOLUME \/\fR[\fI\,SUBVOLUME\/\fR]...
.SH DESCRIPTION
btrsnapshot creates and keeps the latest NUM snapshots of SUBVOLUME within a btrfs filesystem.
The snapshot will be located at: <DIRNAME>/<SUBVOLUME>/<PREFIX><DATE>
.SH OPTIONS
.TP
\fB\-n\fR, \fB\-\-dry\-run\fR
perform a trial run with no changes made
.TP
\fB\-d\fR, \fB\-\-dirname\fR=\fI\,DIRNAME\/\fR
default name is snapshots
.TP
\fB\-p\fR, \fB\-\-prefix\fR=\fI\,PREFIX\/\fR
default is none
.TP
\fB\-e\fR, \fB\-\-expire\fR=\fI\,NUM\/\fR
number of snapshots to keep, default is 7
.TP
\fB\-c\fR, \fB\-\-clean\fR
do not perform a snapshot \- run the expire part only
.TP
\fB\-\-debug\fR
addition debug print
.TP
\fB\-h\fR, \fB\-\-help\fR
show this help
.TP
\fB\-\-version\fR
show verison number
.SH EXAMPLES

Adding the following script to \fB/etc/cron.daily\fR provides a daily snapshot of the subvolume \fI/home\fR and \fI/srv/www\fR.
.br
The snapshot will be stored at \fI/snapshots\fR. The maximum number existing snapshot matching the \fB<PREFIX><DATE>\fR pattern in this folder is set to 7.
.PP
.in +2n
.EX
#!/bin/bash

subvolumes=(\fI/home /srv/www\fR)
prefix="\fIdaily_\fR"
expire=\fI7\fR
targetdir="\fI/snapshots\fR"

\fBbtrsnapshot\fR -d "$targetdir" -p "$prefix" -e $expire "${subvolumes[@]}"
.PP
And the same as one-liner for \fBcrontab\fR
.br
.in +2n
.EX
\fBbtrsnapshot\fR --dirname=\fI/snapshots\fR --prefix=\fIdaily_\fR --expire=\fI7\fR \fI/home /srv/www\fR

\" vim: ft=nroff
